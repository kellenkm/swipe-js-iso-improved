(function(e,t){if(typeof module!=="undefined"&&module.exports){module.exports=t()}else{e.Swipe=t()}})(this,function(){"use strict";return function Swipe(i,r){var t=function(){};var s=function(e){setTimeout(e||t,0)};var o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(e.style[t[n]]!==undefined)return true;return false}(document.createElement("swipe"))};if(!i)return;var f=i.children[0];var l,u,c,a;r=r||{};var d=parseInt(r.startSlide,10)||0;var v=r.speed||300;var h=parseInt(r.widthOfSiblingSlidePreview,10)||0;var w=r.continuous=r.continuous!==undefined?r.continuous:true;var e;function n(){E(true)}function m(){window.clearTimeout(e);e=window.setTimeout(function(){E(false)},50)}function E(e){l=f.children;a=l.length;w=l.length<2?false:r.continuous;u=new Array(l.length);c=Math.ceil(i.getBoundingClientRect().width||i.offsetWidth)-h*2;f.style.width=l.length*c+"px";var t=l.length;while(t--){var n=l[t];if(e)n.style.width=c+"px";n.setAttribute("data-index",t);if(o.transitions){n.style.left=t*-c+h+"px";T(t,d>t?-c:d<t?c:0,0)}}if(w&&o.transitions){T(g(d-1),-c,0);T(g(d+1),c,0)}if(!o.transitions)f.style.left=d*-c+h+"px";i.style.visibility="visible"}function p(){if(w)b(d-1);else if(d)b(d-1)}function x(){if(w)b(d+1);else if(d<l.length-1)b(d+1)}function g(e){return(l.length+e%l.length)%l.length}function b(e,t){if(d==e)return;if(o.transitions){var n=Math.abs(d-e)/(d-e);if(w){var i=n;n=-u[g(e)]/c;if(n!==i)e=-n*l.length+e}var a=Math.abs(d-e)-1;while(a--)T(g((e>d?e:d)-a-1),c*n,0);e=g(e);T(d,c*n,t||v);T(e,0,t||v);if(w)T(g(e-n),-(c*n),0)}else{e=g(e);L(d*-c,e*-c,t||v)}d=e;s(r.callback&&r.callback(d,l[d]))}function T(e,t,n){y(e,t,n);u[e]=t}function y(e,t,n){var i=l[e];var a=i&&i.style;if(!a)return;a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=n+"ms";a.webkitTransform="translate("+t+"px,0)"+"translateZ(0)";a.msTransform=a.MozTransform=a.OTransform="translateX("+t+"px)"}function L(t,n,i){if(!i){f.style.left=n+"px";return}var a=+new Date;var s=setInterval(function(){var e=+new Date-a;if(e>i){f.style.left=n+"px";if(k)M();r.transitionEnd&&r.transitionEnd.call(event,d,l[d]);clearInterval(s);return}f.style.left=(n-t)*(Math.floor(e/i*100)/100)+t+"px"},4)}var k=r.auto||0;var D;function M(){clearTimeout(D);D=setTimeout(x,k)}function z(){k=0;clearTimeout(D)}var S={};var I={};var P;var O={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":s(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":s(this.transitionEnd(e));break;case"resize":s(m);break}if(r.stopPropagation)e.stopPropagation()},start:function(e){var t=e.touches[0];S={x:t.pageX,y:t.pageY,time:+new Date};P=undefined;I={};f.addEventListener("touchmove",this,false);f.addEventListener("touchend",this,false)},move:function(e){if(e.touches.length>1||e.scale&&e.scale!==1)return;if(r.disableScroll)return;var t=e.touches[0];I={x:t.pageX-S.x,y:t.pageY-S.y};if(typeof P=="undefined"){P=!!(P||Math.abs(I.x)<Math.abs(I.y))}if(!P){e.preventDefault();z();if(w){y(g(d-1),I.x+u[g(d-1)],0);y(d,I.x+u[d],0);y(g(d+1),I.x+u[g(d+1)],0)}else{I.x=I.x/(!d&&I.x>0||d==l.length-1&&I.x<0?Math.abs(I.x)/c+1:1);y(d-1,I.x+u[d-1],0);y(d,I.x+u[d],0);y(d+1,I.x+u[d+1],0)}r.swiping&&r.swiping(-I.x/c)}},end:function(e){var t=+new Date-S.time;var n=Number(t)<250&&Math.abs(I.x)>20||Math.abs(I.x)>c/2;var i=!d&&I.x>0||d==l.length-1&&I.x<0;if(w)i=false;var a=I.x<0;if(!P){if(n&&!i){if(a){if(w){T(g(d-1),-c,0);T(g(d+2),c,0)}else{T(d-1,-c,0)}T(d,u[d]-c,v);T(g(d+1),u[g(d+1)]-c,v);d=g(d+1)}else{if(w){T(g(d+1),c,0);T(g(d-2),-c,0)}else{T(d+1,c,0)}T(d,u[d]+c,v);T(g(d-1),u[g(d-1)]+c,v);d=g(d-1)}r.callback&&r.callback(d,l[d])}else{if(w){T(g(d-1),-c,v);T(d,0,v);T(g(d+1),c,v)}else{T(d-1,-c,v);T(d,0,v);T(d+1,c,v)}}}f.removeEventListener("touchmove",O,false);f.removeEventListener("touchend",O,false);f.removeEventListener("touchforcechange",function(){},false)},transitionEnd:function(e){if(parseInt(e.target.getAttribute("data-index"),10)==d){if(k)M();r.transitionEnd&&r.transitionEnd.call(e,d,l[d])}}};n();if(k)M();if(o.addEventListener){if(o.touch){f.addEventListener("touchstart",O,false);f.addEventListener("touchforcechange",function(){},false)}if(o.transitions){f.addEventListener("webkitTransitionEnd",O,false);f.addEventListener("msTransitionEnd",O,false);f.addEventListener("oTransitionEnd",O,false);f.addEventListener("otransitionend",O,false);f.addEventListener("transitionend",O,false)}window.addEventListener("resize",O,false)}else{window.onresize=function(){m()}}return{setup:function(){n()},slide:function(e,t){z();b(e,t)},prev:function(){z();p()},next:function(){z();x()},stop:function(){z()},getPos:function(){return d},getNumSlides:function(){return a},kill:function(){z();f.style.width="";f.style.left="";var e=l.length;while(e--){var t=l[e];t.style.width="";t.style.left="";if(o.transitions)y(e,0,0)}if(o.addEventListener){f.removeEventListener("touchstart",O,false);f.removeEventListener("webkitTransitionEnd",O,false);f.removeEventListener("msTransitionEnd",O,false);f.removeEventListener("oTransitionEnd",O,false);f.removeEventListener("otransitionend",O,false);f.removeEventListener("transitionend",O,false);window.removeEventListener("resize",O,false)}else{window.onresize=null}}}}});